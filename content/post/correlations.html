---
title: "Correlations"
date: 2020-03-24
author: Nick Griffiths
draft: true
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<pre class="r"><code>a1 &lt;- function() { rnorm(100, mean = 10, sd = 5) }
a2 &lt;- function(a1) { a1 * 3 + rnorm(100, mean = 0, sd = 20) }

b1 &lt;- function() { rnorm(100, mean = -2, sd = 3) }
b2 &lt;- function(b1) { b1 * 6 + rnorm(100, mean = 0, sd = 20) }

c1 &lt;- function() { rnorm(100, mean = 100, sd = 30) }
c2 &lt;- function(c1) { c1 + rnorm(100, mean = 0, sd = 35) }</code></pre>
<pre class="r"><code>run_cors &lt;- function() {
  a1_val &lt;- a1()
  a2_val &lt;- a2(a1_val)
  cora &lt;- cor(a1_val, a2_val)

  b1_val &lt;- b1()
  b2_val &lt;- b2(b1_val)
  corb &lt;- cor(b1_val, b2_val)

  c1_val &lt;- c1()
  c2_val &lt;- c2(c1_val)
  corc &lt;- cor(c1_val, c2_val)

  cortot &lt;- cor(a1_val + b1_val, a2_val + b2_val)

  sum(c(cortot &gt; cora, cortot &gt; corb))
}</code></pre>
<pre class="r"><code>run_sim &lt;- function () { hist(replicate(1000, run_cors())) }

run_sim()</code></pre>
<p><img src="/post/correlations_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The value 0 indicates the sum correlation is less than both, and the value 1 indicates it is between the <code>a</code> and <code>b</code> correlations. We see that the correlation of a sum of two random variables is biased towards values lower than each individual variable.</p>
